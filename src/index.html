<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <script>alert('bevestig om te beginnen')</script> -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bar Bord</title>
    <script src="https://ce.lennertderyck.be/library/elements.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="./js/taffy.js"></script>
    <script src="./js/filesaver.js"></script>
    <script src="./js/cookies.js"></script>
    <!-- <script src="./js/feather.min.js"></script> -->
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="./js/sha256.min.js"></script>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/fonts.css">
</head>
<body class="mt-5 mb-4" data-admin-login="false">
    <header>
        <div class="container pl-0">
            <div class="flex justify-content-center">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Barbord</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Registratie</a>
                    </li>
                    <li class="nav-item show-admin ">
                        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Leiding</a>
                    </li>
                    <li class="nav-item show-admin">
                        <a class="nav-link" id="dranken-tab" data-toggle="tab" href="#dranken" role="tab" aria-controls="dranken" aria-selected="false">Verkoop</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="settings-tab" data-toggle="tab" href="#settings" role="tab" aria-controls="settings" aria-selected="false">Instellingen</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="other-tab" data-toggle="tab" href="#other" role="tab" aria-controls="other" aria-selected="false">Help</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <div class="container">
                <div id="notifNoLeiding" class="card text-white bg-info mb-4">
                    <div class="card-body">
                        <h4>Er werd geen leiding gevonden</h4>
                        <p class="mb-0">Maak leiding aan onder het tabblad 'Leiding beheer'</p>
                    </div>
                </div>

                

                <div class="row mb-4 d-none">
                    <div class="col">
                        <h3>Naam</h3>
                        <p>Kies je naam</p>
                        <div class="flex-grid-wrapper row-item-4">
                            <div class="buttons flex-grid"></div>
                        </div>
                    </div>
                    <div id="showCurrents" class="p-4 container">
                        <div class="row">
                            <div class="col-auto">
                                <div id="showCurrentAmount" class="card text-white bg-color-main mb-4 d-none">
                                    <div class="card-body">
                                        <h5 class="card-title mb-0">Je hebt momenteel <span class="showCurrentAmount">lol</span> tegoed</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div id="notifCurrentAmount" class="card text-white bg-danger d-none">
                                    <div class="card-body">
                                        <h4 class="mb-0">Je tegoed bedraagt â‚¬0,80 of minder</h4>
                                        <p class="mb-0">Als je nu drank koopt zal je een negatief bedrag hebben en dus 3% meer betalen.</p>
                                        <!-- <p class="mb-0 d-none">Je zal 3% meer betalen</p> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                               
                <div id="selectDrank" class="row mb-4 d-none">
                    <div class="col">
                        <h3 class="mb-3">Dranken</h3> 
                        <div class="flex-grid-wrapper row-item-4">
                            <div id="listDranken" class="flex-grid"></div>
                        </div>
                    </div>
                </div>

                <div id="selectContent" class="row mb-4 d-none">
                    <div class="col">
                        <h3 class="mb-3">Hoeveelheid</h3>
                        <div class="flex-grid-wrapper">
                            <div class="flex-grid">
                                <button class="btn btn-primary txt-item flex-grid-item" onclick="selectAmount(0)">
                                    <img class="mb-2 mx-auto d-block" src="./images/icons/icon_hoev_enkel_white.svg" height="30px" alt="">
                                    <span class="d-block">Enkel</span>
                                </button>
                                <button class="btn btn-primary txt-item flex-grid-item d-none" onclick="selectAmount(1)">
                                    <img class="mb-2 mx-auto d-block" src="./images/icons/icon_hoev_dubbel_white.svg" height="30px" alt="">
                                    <span class="d-block">Dubbel</span>
                                </button>
                                <button class="btn btn-primary txt-item flex-grid-item d-none" onclick="selectAmount(2)">
                                    <img class="mb-2 mx-auto d-block" src="./images/icons/icon_hoev_half_white.svg" height="30px" alt="">
                                    <span class="d-block">Extra</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                 
            </div>
        </div>
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <div class="container">
                <h3 class="mb-4">Leiding</h3>
                <div class="row">
                    <div class="col">
                        <div id="errorNewLeiding" class="card text-white bg-danger mb-4 d-none">
                            <div class="card-body">
                                <h5 class="card-title mb-0 ">Geef een naam en bedrag op</h5>
                            </div>
                        </div>
                        <table class="table mb-0">
                            <thead>
                                <tr>
                                    <th scope="col">Naam</th>
                                    <th scope="col">Tegoed</th>
                                    <th scope="col">Topup</th>
                                </tr>
                            </thead>
                            <tbody class="nohover">
                                <tr>
                                    <th>
                                        <input type="text" class="form-control" name="leiding naam" id="leidingNaam" autocomplete="off" placeholder="Naam leiding"><br>
                                    </th>
                                    <th>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="leidingBedrag" placeholder="Startbedrag" min="1">
                                            <div class="input-group-append">
                                                <button id="createLeiding" class="btn btn-primary"><i data-feather="user-plus"></i>Leiding toevoegen</button>
                                            </div>
                                         </div>
                                    </th>
                                    <th>
                                        <input type="number" class="form-control" name="top up" id="topUpAmount" value="0" placeholder="Toe te voegen tegoed">
                                    </th>
                                </tr>
                            </tbody>
                            <tbody id="tableLeiding"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
            <div class="container">
                <h3 class="mb-4">Registratie</h3>
                <table class="table mb-0">
                    <thead>
                        <tr>
                            <th scope="col">Datum</th>
                            <th scope="col">Naam</th>
                            <th scope="col">Item</th>
                            <th scope="col">Bedrag</th>
                        </tr>
                    </thead>
                    <tbody id="tableRecords"></tbody>
                </table>
            </div>
        </div>
        <div class="tab-pane fade" id="dranken" role="tabpanel" aria-labelledby="dranken-tab">
            <div class="container">
                <h3 class="mb-4">Drank beheer</h3>
                <table class="table mb-0">
                    <thead>
                        <tr>
                            <th scope="col">Naam drank</th>
                            <th scope="col">Prijs</th>
                            <th scope="col">Cocktail?</th>
                            <th scope="col">Kleur</th>
                        </tr>
                    </thead>
                    <tbody class="nohover">
                        <tr>
                            <th>
                                <input type="text" class="form-control" name="leiding naam" id="drankNaam" autocomplete="off" placeholder="Naam drank"><br>
                            </th>
                            <th class="input-group">
                                <input type="number" class="form-control" id="inpDrankAmount" placeholder="Enkel" min="0.01">
                                <input type="number" class="form-control" id="inpDrankAmount2" placeholder="Dubbel" min="0.01">
                                <input type="number" class="form-control" id="inpDrankAmount3" placeholder="Extra" min="0.01">
                            </th>
                            <th>                            
                                <div class="input-group">
                                    <select class="custom-select" id="inputDrankMix">
                                        <option value="0" selected>Geen</option>
                                        <option value="1">Fris</option>
                                        <option value="2">Fristi / fruitsap</option>
                                    </select>
                                    <div class="input-group-append">
                                        <button id="addDrank" class="btn btn-primary" onclick="addDrank()"><i data-feather="plus"></i>toevoegen</button>
                                    </div>
                                </div>
                            </th> 
                            <th>
                                <input type="color" id="inpDrankColor" name="favcolor" value="#007bff">
                            </th>
                        </tr>
                    </tbody>
                    <tbody id="tableDrank"></tbody>
                </table>
            </div>
        </div>
        <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
            <div class="container">
                <h3 class="mb-4">Instellingen</h3>
                <div class="row mb-4">
                    <div class="col-6">
                        <h5>Aanmelden</h5>
                        <p>Login als stamleiding om het Bar Board te beheren</p>

                        <div class="input-group hide-admin">
                            <div class="input-group-prepend">
                                <div class="input-group-text icon-sm"><i data-feather="lock"></i></div>
                            </div>
                            <input type="password" class="form-control" id="inpAdminPassword" placeholder="Wachtwoord">
                            <div class="input-group-append">
                                <button class="btn btn-primary" onclick="logInAdmin()">Aanmelden</button>
                            </div>
                        </div>
                        <button class="btn btn-primary show-admin" onclick="logOffAdmin()"><i data-feather="log-out"></i>Afmelden</button>
                    </div>
                    <div class="col-6 show-admin">
                        <h5>Wachtwoord</h5>
                        <p>Wachtwoord aanpassen</p>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text icon-sm"><i data-feather="lock"></i></div>
                            </div>
                            <input type="password" class="form-control" id="inpChangePassword" placeholder="Wachtwoord">
                            <div class="input-group-append">
                            <button class="btn btn-primary" onclick="saveAdminPassword()"><i data-feather="save"></i>Opslaan</button>
                            </div>
                        </div>
                        <p><small>Hoeft er geen wachtwoord ingesteld te worden? Laat het vak dan leeg en sla op.</small></p>
                    </div>
                </div>
                <hr class="my-4">
                <div class="row">
                    <div class="col">
                        <h5>Gegevens downloaden</h5>
                        <p>Download alle opgeslagen gegevens zodat er een backup bestaat. Doe dit zo vaak mogelijk.</p>
                        <button class="btn btn-success" onclick="save()"><i data-feather="download"></i>Gegevens exporteren</button>
                    </div>
                    <div class="col">
                        <h5 class="mb-3">Backup importeren</h5>
                        <p class="show-admin">Importeer het gedownloade bestand om gegevens te herstellen</p>
                        <form id="jsonFile" class="show-admin" name="jsonFile" enctype="multipart/form-data" method="post">
                            <fieldset>
                                <input type='file' id='fileinput'>
                                <input type='button' class="btn btn-primary" id='btnLoad' value='Inladen' onclick='loadFile();'>
                            </fieldset>
                        </form>
                        <p class="hide-admin">Een backup terugzetten is enkel mogelijk als beheerder; Meld je aan hierboven</p>
                    </div>
                </div>
                <div class="row mb-0 show-admin">
                    <div class="col">
                        <hr class="my-4">
                        <h5>Gegevens verwijderen</h5>
                        <p>Verwijder alle leiding en/of de registraties</p>
                        <button class="btn btn-danger d-inline mr-3" onclick="removeDBLeiding()"><i data-feather="trash-2"></i>Leiding verwijderen</button>
                        <button class="btn btn-warning d-inline mr-3" onclick="removeDBRecords()"><i data-feather="trash-2"></i>Registraties verwijderen</button>
                        <button class="btn btn-warning d-inline" onclick="removeDBDranken()"><i data-feather="trash-2"></i>Dranken verwijderen</button>
                    </div>
                </div>


            </div>
        </div>
        <div class="tab-pane fade" id="other" role="tabpanel" aria-labelledby="other-tab">
            <div class="container">
                <h3 class="mb-4">Help</h3>
                <div class="row">
                    <div class="col">
                        <div class="row mb-2">
                            <div class="col-auto mr-4">
                                <img src="./images/qr_code_5.png" height="120px"/>
                            </div>
                            <div class="col d-flex flex-column justify-content-center">
                                <h5 class="mt-0">Stamkaart</h5>
                                <p class="mb-0">Scan de code met je bankapp</p>
                                <p class="mb-0"><strong>BE58 7360 3139 0779</strong></p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col">
                                <p class="mb-0">
                                    of ga naar <strong>haegepoorters.be/stamkaart/5</strong>
                                </p>
                                <p class="mb-0"><small>rekeningnummer wordt automatisch gekopieerd</small></p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="col">
                            <h5>Stam HP</h5>
                            <p class="mb-1">Volg op Spotify en voeg zelf nummers toe!</p>
                            <small class="d-block mb-3"><strong>Open spotify â†’ Zoeken â†’ Camera icoon â†’ Scan de code</strong></small>
                            <img class="mb-3" src="./images/spotify_code.svg" alt="" width="200px">

                            <p class="mb-0">of ga naar <strong>haegepoorters.be/stamhp</strong></p>

                        </div>
                    </div>
                </div>
                <hr class="my-4">
                <div class="row">
                    <div class="col">
                        <h5><small><strong>Voorwaarden en beveiliging</strong></small></h5>
                        <p class="mb-2"><small>
                            Deze applicatie werd gemaakt met context in het achterhoofd. Het is bedoeld voor jeugdverenigingen, kleine vzw's en dergelijke om het betalen van drank en snacks te vergemakkelijken. De beveiliging voor bijvoorbeeld de gegevens en zorgen dat deze niet gemanipuleerd worden is minimaal.
                        </small></p>
                        <p class="mb-2"><small>
                            Een persoon met enige kennis van Javascript en/of andere webtechnologieÃ«n zou vrij eenvoudig gegevens kunnen manipuleren of verwijderen indien men gebruik maakt van de webapplicatie (de demoversie), het is dus aangeraden de applicatie als software te gebruiken.
                            Doch zou de beveiliging genoeg moeten zijn voor gebruik op plaatsen zoals een jeugdvereniging.
                        </small></p>
                        <p class="mb-0"><small>
                            Het is aangeraden regelmatig een back-up te maken. De ontwikkelaar is niet verantwoordelijk voor het verlies van data of voor enige vorm van misbruik van de applicatie.
                        </small></p>
                    </div>
                    <div class="col-3">
                        <p class="font-scnd mb-0"><strong>Credits</strong></p>
                        <small class="d-block mb-2">Ontwikkeld door <a href="https://www.instagram.com/lennertderyck/" target="_blank" rel="noopener" class="url">@lennertderyck</a>,<br>bijdragen kan op <a href="https://github.com/lennertderyck/bar-board" target="_blank" rel="noopener" class="url">GitHub</a>.</small>
                        <small class="d-block icon-sm"><i data-feather="heart"></i> <a href="https://getbootstrap.com" target="_blank" rel="noopener" class="url">Bootstrap</a>, <a href="https://feathericons.com/" target="_blank" rel="noopener" class="url">Feather</a> & <a href="https://electronjs.org/" target="_blank" rel="noopener" class="url">Electron</a></small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS BOTTOM -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="./js/main.js"></script>
    <script>
        feather.replace()
    </script>
</body>
</html>